{"version":"tree-0.1","tree":{"id":"App","path":"","constructInfo":{"fqn":"aws-cdk-lib.App","version":"2.232.1"},"children":{"SimplePipelineStack":{"id":"SimplePipelineStack","path":"SimplePipelineStack","constructInfo":{"fqn":"aws-cdk-lib.Stack","version":"2.232.1"},"children":{"FlaskRepoo3":{"id":"FlaskRepoo3","path":"SimplePipelineStack/FlaskRepoo3","constructInfo":{"fqn":"aws-cdk-lib.aws_ecr.Repository","version":"2.232.1","metadata":[]},"children":{"Resource":{"id":"Resource","path":"SimplePipelineStack/FlaskRepoo3/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_ecr.CfnRepository","version":"2.232.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ECR::Repository","aws:cdk:cloudformation:props":{"repositoryName":"flask-docker-appp3"}}}}},"DockerBuildProjectt1":{"id":"DockerBuildProjectt1","path":"SimplePipelineStack/DockerBuildProjectt1","constructInfo":{"fqn":"aws-cdk-lib.aws_codebuild.PipelineProject","version":"2.232.1","metadata":[]},"children":{"Role":{"id":"Role","path":"SimplePipelineStack/DockerBuildProjectt1/Role","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.232.1","metadata":[]},"children":{"ImportRole":{"id":"ImportRole","path":"SimplePipelineStack/DockerBuildProjectt1/Role/ImportRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.232.1","metadata":[]}},"Resource":{"id":"Resource","path":"SimplePipelineStack/DockerBuildProjectt1/Role/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.232.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"codebuild.amazonaws.com"}}],"Version":"2012-10-17"}}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"SimplePipelineStack/DockerBuildProjectt1/Role/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.232.1","metadata":[]},"children":{"Resource":{"id":"Resource","path":"SimplePipelineStack/DockerBuildProjectt1/Role/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.232.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["logs:CreateLogGroup","logs:CreateLogStream","logs:PutLogEvents"],"Effect":"Allow","Resource":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":logs:",{"Ref":"AWS::Region"},":",{"Ref":"AWS::AccountId"},":log-group:/aws/codebuild/",{"Ref":"DockerBuildProjectt19827A3BA"}]]},{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":logs:",{"Ref":"AWS::Region"},":",{"Ref":"AWS::AccountId"},":log-group:/aws/codebuild/",{"Ref":"DockerBuildProjectt19827A3BA"},":*"]]}]},{"Action":["codebuild:CreateReportGroup","codebuild:CreateReport","codebuild:UpdateReport","codebuild:BatchPutTestCases","codebuild:BatchPutCodeCoverages"],"Effect":"Allow","Resource":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":codebuild:",{"Ref":"AWS::Region"},":",{"Ref":"AWS::AccountId"},":report-group/",{"Ref":"DockerBuildProjectt19827A3BA"},"-*"]]}},{"Action":["ecr:BatchCheckLayerAvailability","ecr:GetDownloadUrlForLayer","ecr:BatchGetImage","ecr:CompleteLayerUpload","ecr:UploadLayerPart","ecr:InitiateLayerUpload","ecr:PutImage"],"Effect":"Allow","Resource":{"Fn::GetAtt":["FlaskRepoo3C19B4145","Arn"]}},{"Action":"ecr:GetAuthorizationToken","Effect":"Allow","Resource":"*"},{"Action":["s3:GetObject*","s3:GetBucket*","s3:List*"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["FlaskDockerPipelinee1ArtifactsBucketF2853016","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["FlaskDockerPipelinee1ArtifactsBucketF2853016","Arn"]},"/*"]]}]},{"Action":["kms:Decrypt","kms:DescribeKey"],"Effect":"Allow","Resource":{"Fn::GetAtt":["FlaskDockerPipelinee1ArtifactsBucketEncryptionKey52C10CFF","Arn"]}},{"Action":["kms:Decrypt","kms:Encrypt","kms:ReEncrypt*","kms:GenerateDataKey*"],"Effect":"Allow","Resource":{"Fn::GetAtt":["FlaskDockerPipelinee1ArtifactsBucketEncryptionKey52C10CFF","Arn"]}}],"Version":"2012-10-17"},"policyName":"DockerBuildProjectt1RoleDefaultPolicyA295084F","roles":[{"Ref":"DockerBuildProjectt1Role4FB46632"}]}}}}}}},"Resource":{"id":"Resource","path":"SimplePipelineStack/DockerBuildProjectt1/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_codebuild.CfnProject","version":"2.232.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::CodeBuild::Project","aws:cdk:cloudformation:props":{"artifacts":{"type":"CODEPIPELINE"},"cache":{"type":"NO_CACHE"},"encryptionKey":{"Fn::GetAtt":["FlaskDockerPipelinee1ArtifactsBucketEncryptionKey52C10CFF","Arn"]},"environment":{"type":"LINUX_CONTAINER","image":"aws/codebuild/standard:7.0","imagePullCredentialsType":"CODEBUILD","privilegedMode":true,"computeType":"BUILD_GENERAL1_SMALL","environmentVariables":[{"name":"ECR_REPO_URI","type":"PLAINTEXT","value":{"Fn::Join":["",[{"Fn::Select":[4,{"Fn::Split":[":",{"Fn::GetAtt":["FlaskRepoo3C19B4145","Arn"]}]}]},".dkr.ecr.",{"Fn::Select":[3,{"Fn::Split":[":",{"Fn::GetAtt":["FlaskRepoo3C19B4145","Arn"]}]}]},".",{"Ref":"AWS::URLSuffix"},"/",{"Ref":"FlaskRepoo3C19B4145"}]]}}]},"serviceRole":{"Fn::GetAtt":["DockerBuildProjectt1Role4FB46632","Arn"]},"source":{"type":"CODEPIPELINE","buildSpec":"{\n  \"version\": \"0.2\",\n  \"phases\": {\n    \"pre_build\": {\n      \"commands\": [\n        \"echo Logging in to Amazon ECR...\",\n        \"aws --version\",\n        \"aws ecr get-login-password --region $AWS_DEFAULT_REGION | docker login --username AWS --password-stdin $ECR_REPO_URI\"\n      ]\n    },\n    \"build\": {\n      \"commands\": [\n        \"echo Building Docker image...\",\n        \"docker build -t flask-app .\",\n        \"docker tag flask-app:latest $ECR_REPO_URI:latest\"\n      ]\n    },\n    \"post_build\": {\n      \"commands\": [\n        \"echo Pushing Docker image to ECR...\",\n        \"docker push $ECR_REPO_URI:latest\"\n      ]\n    }\n  }\n}"}}}}}},"FlaskDockerPipelinee1":{"id":"FlaskDockerPipelinee1","path":"SimplePipelineStack/FlaskDockerPipelinee1","constructInfo":{"fqn":"aws-cdk-lib.aws_codepipeline.Pipeline","version":"2.232.1","metadata":[]},"children":{"ArtifactsBucketEncryptionKey":{"id":"ArtifactsBucketEncryptionKey","path":"SimplePipelineStack/FlaskDockerPipelinee1/ArtifactsBucketEncryptionKey","constructInfo":{"fqn":"aws-cdk-lib.aws_kms.Key","version":"2.232.1","metadata":[]},"children":{"Resource":{"id":"Resource","path":"SimplePipelineStack/FlaskDockerPipelinee1/ArtifactsBucketEncryptionKey/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_kms.CfnKey","version":"2.232.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::KMS::Key","aws:cdk:cloudformation:props":{"keyPolicy":{"Statement":[{"Action":"kms:*","Effect":"Allow","Principal":{"AWS":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::",{"Ref":"AWS::AccountId"},":root"]]}},"Resource":"*"}],"Version":"2012-10-17"}}}}}},"ArtifactsBucketEncryptionKeyAlias":{"id":"ArtifactsBucketEncryptionKeyAlias","path":"SimplePipelineStack/FlaskDockerPipelinee1/ArtifactsBucketEncryptionKeyAlias","constructInfo":{"fqn":"aws-cdk-lib.aws_kms.Alias","version":"2.232.1","metadata":[]},"children":{"Resource":{"id":"Resource","path":"SimplePipelineStack/FlaskDockerPipelinee1/ArtifactsBucketEncryptionKeyAlias/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_kms.CfnAlias","version":"2.232.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::KMS::Alias","aws:cdk:cloudformation:props":{"aliasName":"alias/codepipeline-simplepipelinestackflaskdockerpipelinee1c533c5f9","targetKeyId":{"Fn::GetAtt":["FlaskDockerPipelinee1ArtifactsBucketEncryptionKey52C10CFF","Arn"]}}}}}},"ArtifactsBucket":{"id":"ArtifactsBucket","path":"SimplePipelineStack/FlaskDockerPipelinee1/ArtifactsBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.Bucket","version":"2.232.1","metadata":[]},"children":{"Resource":{"id":"Resource","path":"SimplePipelineStack/FlaskDockerPipelinee1/ArtifactsBucket/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.CfnBucket","version":"2.232.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::S3::Bucket","aws:cdk:cloudformation:props":{"bucketEncryption":{"serverSideEncryptionConfiguration":[{"serverSideEncryptionByDefault":{"sseAlgorithm":"aws:kms","kmsMasterKeyId":{"Fn::GetAtt":["FlaskDockerPipelinee1ArtifactsBucketEncryptionKey52C10CFF","Arn"]}}}]},"publicAccessBlockConfiguration":{"blockPublicAcls":true,"blockPublicPolicy":true,"ignorePublicAcls":true,"restrictPublicBuckets":true}}}},"Policy":{"id":"Policy","path":"SimplePipelineStack/FlaskDockerPipelinee1/ArtifactsBucket/Policy","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketPolicy","version":"2.232.1","metadata":[]},"children":{"Resource":{"id":"Resource","path":"SimplePipelineStack/FlaskDockerPipelinee1/ArtifactsBucket/Policy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.CfnBucketPolicy","version":"2.232.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::S3::BucketPolicy","aws:cdk:cloudformation:props":{"bucket":{"Ref":"FlaskDockerPipelinee1ArtifactsBucketF2853016"},"policyDocument":{"Statement":[{"Action":"s3:*","Condition":{"Bool":{"aws:SecureTransport":"false"}},"Effect":"Deny","Principal":{"AWS":"*"},"Resource":[{"Fn::GetAtt":["FlaskDockerPipelinee1ArtifactsBucketF2853016","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["FlaskDockerPipelinee1ArtifactsBucketF2853016","Arn"]},"/*"]]}]}],"Version":"2012-10-17"}}}}}}}},"Role":{"id":"Role","path":"SimplePipelineStack/FlaskDockerPipelinee1/Role","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.232.1","metadata":[]},"children":{"ImportRole":{"id":"ImportRole","path":"SimplePipelineStack/FlaskDockerPipelinee1/Role/ImportRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.232.1","metadata":[]}},"Resource":{"id":"Resource","path":"SimplePipelineStack/FlaskDockerPipelinee1/Role/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.232.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"codepipeline.amazonaws.com"}}],"Version":"2012-10-17"}}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"SimplePipelineStack/FlaskDockerPipelinee1/Role/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.232.1","metadata":[]},"children":{"Resource":{"id":"Resource","path":"SimplePipelineStack/FlaskDockerPipelinee1/Role/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.232.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["s3:GetObject*","s3:GetBucket*","s3:List*","s3:DeleteObject*","s3:PutObject","s3:PutObjectLegalHold","s3:PutObjectRetention","s3:PutObjectTagging","s3:PutObjectVersionTagging","s3:Abort*"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["FlaskDockerPipelinee1ArtifactsBucketF2853016","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["FlaskDockerPipelinee1ArtifactsBucketF2853016","Arn"]},"/*"]]}]},{"Action":["kms:Decrypt","kms:DescribeKey","kms:Encrypt","kms:ReEncrypt*","kms:GenerateDataKey*"],"Effect":"Allow","Resource":{"Fn::GetAtt":["FlaskDockerPipelinee1ArtifactsBucketEncryptionKey52C10CFF","Arn"]}},{"Action":"sts:AssumeRole","Effect":"Allow","Resource":{"Fn::GetAtt":["FlaskDockerPipelinee1SourceGitHubSourceCodePipelineActionRoleF43A04FF","Arn"]}},{"Action":"sts:AssumeRole","Effect":"Allow","Resource":{"Fn::GetAtt":["FlaskDockerPipelinee1CreateVPCDeployNetworkStackCodePipelineActionRole113390F1","Arn"]}},{"Action":"sts:AssumeRole","Effect":"Allow","Resource":{"Fn::GetAtt":["FlaskDockerPipelinee1BuildAndPushDockerDockerBuildCodePipelineActionRole4005A06B","Arn"]}}],"Version":"2012-10-17"},"policyName":"FlaskDockerPipelinee1RoleDefaultPolicy3AAA1A46","roles":[{"Ref":"FlaskDockerPipelinee1Role2C73E70F"}]}}}}}}},"Resource":{"id":"Resource","path":"SimplePipelineStack/FlaskDockerPipelinee1/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_codepipeline.CfnPipeline","version":"2.232.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::CodePipeline::Pipeline","aws:cdk:cloudformation:props":{"artifactStore":{"type":"S3","location":{"Ref":"FlaskDockerPipelinee1ArtifactsBucketF2853016"},"encryptionKey":{"type":"KMS","id":{"Fn::GetAtt":["FlaskDockerPipelinee1ArtifactsBucketEncryptionKey52C10CFF","Arn"]}}},"name":"FlaskDockerPipelinee1","roleArn":{"Fn::GetAtt":["FlaskDockerPipelinee1Role2C73E70F","Arn"]},"stages":[{"name":"Source","actions":[{"name":"GitHub_Source","outputArtifacts":[{"name":"Artifact_Source_GitHub_Source"}],"actionTypeId":{"category":"Source","version":"1","owner":"AWS","provider":"CodeStarSourceConnection"},"configuration":{"ConnectionArn":"arn:aws:codeconnections:us-east-1:456582263462:connection/bc825e8d-e9cb-4c4f-b1da-0d54dc99db01","FullRepositoryId":"alexriley7/codepipelinetest_ecr","BranchName":"master","DetectChanges":true},"runOrder":1,"roleArn":{"Fn::GetAtt":["FlaskDockerPipelinee1SourceGitHubSourceCodePipelineActionRoleF43A04FF","Arn"]}}]},{"name":"Create_VPC","actions":[{"name":"DeployNetworkStack","inputArtifacts":[{"name":"Artifact_Source_GitHub_Source"}],"actionTypeId":{"category":"Deploy","version":"1","owner":"AWS","provider":"CloudFormation"},"configuration":{"StackName":"NetworkStackFromPipeline","Capabilities":"CAPABILITY_NAMED_IAM","RoleArn":{"Fn::GetAtt":["FlaskDockerPipelinee1CreateVPCDeployNetworkStackRole2EB9FA80","Arn"]},"ActionMode":"CREATE_UPDATE","TemplatePath":"Artifact_Source_GitHub_Source::network-stack.template.json"},"runOrder":1,"roleArn":{"Fn::GetAtt":["FlaskDockerPipelinee1CreateVPCDeployNetworkStackCodePipelineActionRole113390F1","Arn"]}}]},{"name":"BuildAndPushDocker","actions":[{"name":"DockerBuild","inputArtifacts":[{"name":"Artifact_Source_GitHub_Source"}],"actionTypeId":{"category":"Build","version":"1","owner":"AWS","provider":"CodeBuild"},"configuration":{"ProjectName":{"Ref":"DockerBuildProjectt19827A3BA"}},"runOrder":1,"roleArn":{"Fn::GetAtt":["FlaskDockerPipelinee1BuildAndPushDockerDockerBuildCodePipelineActionRole4005A06B","Arn"]}}]}]}}},"Source":{"id":"Source","path":"SimplePipelineStack/FlaskDockerPipelinee1/Source","constructInfo":{"fqn":"constructs.Construct","version":"10.4.3"},"children":{"GitHub_Source":{"id":"GitHub_Source","path":"SimplePipelineStack/FlaskDockerPipelinee1/Source/GitHub_Source","constructInfo":{"fqn":"constructs.Construct","version":"10.4.3"},"children":{"CodePipelineActionRole":{"id":"CodePipelineActionRole","path":"SimplePipelineStack/FlaskDockerPipelinee1/Source/GitHub_Source/CodePipelineActionRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.232.1","metadata":[]},"children":{"ImportCodePipelineActionRole":{"id":"ImportCodePipelineActionRole","path":"SimplePipelineStack/FlaskDockerPipelinee1/Source/GitHub_Source/CodePipelineActionRole/ImportCodePipelineActionRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.232.1","metadata":[]}},"Resource":{"id":"Resource","path":"SimplePipelineStack/FlaskDockerPipelinee1/Source/GitHub_Source/CodePipelineActionRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.232.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"AWS":{"Fn::GetAtt":["FlaskDockerPipelinee1Role2C73E70F","Arn"]}}}],"Version":"2012-10-17"}}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"SimplePipelineStack/FlaskDockerPipelinee1/Source/GitHub_Source/CodePipelineActionRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.232.1","metadata":[]},"children":{"Resource":{"id":"Resource","path":"SimplePipelineStack/FlaskDockerPipelinee1/Source/GitHub_Source/CodePipelineActionRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.232.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":"codestar-connections:UseConnection","Effect":"Allow","Resource":"arn:aws:codeconnections:us-east-1:456582263462:connection/bc825e8d-e9cb-4c4f-b1da-0d54dc99db01"},{"Action":["s3:GetObject*","s3:GetBucket*","s3:List*","s3:DeleteObject*","s3:PutObject","s3:PutObjectLegalHold","s3:PutObjectRetention","s3:PutObjectTagging","s3:PutObjectVersionTagging","s3:Abort*"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["FlaskDockerPipelinee1ArtifactsBucketF2853016","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["FlaskDockerPipelinee1ArtifactsBucketF2853016","Arn"]},"/*"]]}]},{"Action":["kms:Decrypt","kms:DescribeKey","kms:Encrypt","kms:ReEncrypt*","kms:GenerateDataKey*"],"Effect":"Allow","Resource":{"Fn::GetAtt":["FlaskDockerPipelinee1ArtifactsBucketEncryptionKey52C10CFF","Arn"]}},{"Action":["s3:PutObjectAcl","s3:PutObjectVersionAcl"],"Effect":"Allow","Resource":{"Fn::Join":["",[{"Fn::GetAtt":["FlaskDockerPipelinee1ArtifactsBucketF2853016","Arn"]},"/*"]]}}],"Version":"2012-10-17"},"policyName":"FlaskDockerPipelinee1SourceGitHubSourceCodePipelineActionRoleDefaultPolicyC0AC9035","roles":[{"Ref":"FlaskDockerPipelinee1SourceGitHubSourceCodePipelineActionRoleF43A04FF"}]}}}}}}}}}}},"Create_VPC":{"id":"Create_VPC","path":"SimplePipelineStack/FlaskDockerPipelinee1/Create_VPC","constructInfo":{"fqn":"constructs.Construct","version":"10.4.3"},"children":{"DeployNetworkStack":{"id":"DeployNetworkStack","path":"SimplePipelineStack/FlaskDockerPipelinee1/Create_VPC/DeployNetworkStack","constructInfo":{"fqn":"constructs.Construct","version":"10.4.3"},"children":{"CodePipelineActionRole":{"id":"CodePipelineActionRole","path":"SimplePipelineStack/FlaskDockerPipelinee1/Create_VPC/DeployNetworkStack/CodePipelineActionRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.232.1","metadata":[]},"children":{"ImportCodePipelineActionRole":{"id":"ImportCodePipelineActionRole","path":"SimplePipelineStack/FlaskDockerPipelinee1/Create_VPC/DeployNetworkStack/CodePipelineActionRole/ImportCodePipelineActionRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.232.1","metadata":[]}},"Resource":{"id":"Resource","path":"SimplePipelineStack/FlaskDockerPipelinee1/Create_VPC/DeployNetworkStack/CodePipelineActionRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.232.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"AWS":{"Fn::GetAtt":["FlaskDockerPipelinee1Role2C73E70F","Arn"]}}}],"Version":"2012-10-17"}}}},"8389e75f-0810-4838-bf64-d6f85a95cf83":{"id":"8389e75f-0810-4838-bf64-d6f85a95cf83","path":"SimplePipelineStack/FlaskDockerPipelinee1/Create_VPC/DeployNetworkStack/CodePipelineActionRole/8389e75f-0810-4838-bf64-d6f85a95cf83","constructInfo":{"fqn":"constructs.Construct","version":"10.4.3"}},"DefaultPolicy":{"id":"DefaultPolicy","path":"SimplePipelineStack/FlaskDockerPipelinee1/Create_VPC/DeployNetworkStack/CodePipelineActionRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.232.1","metadata":[]},"children":{"Resource":{"id":"Resource","path":"SimplePipelineStack/FlaskDockerPipelinee1/Create_VPC/DeployNetworkStack/CodePipelineActionRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.232.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":"iam:PassRole","Effect":"Allow","Resource":{"Fn::GetAtt":["FlaskDockerPipelinee1CreateVPCDeployNetworkStackRole2EB9FA80","Arn"]}},{"Action":["s3:GetObject*","s3:GetBucket*","s3:List*"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["FlaskDockerPipelinee1ArtifactsBucketF2853016","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["FlaskDockerPipelinee1ArtifactsBucketF2853016","Arn"]},"/*"]]}]},{"Action":["kms:Decrypt","kms:DescribeKey"],"Effect":"Allow","Resource":{"Fn::GetAtt":["FlaskDockerPipelinee1ArtifactsBucketEncryptionKey52C10CFF","Arn"]}},{"Action":["cloudformation:CreateStack","cloudformation:DescribeStack*","cloudformation:GetStackPolicy","cloudformation:GetTemplate*","cloudformation:SetStackPolicy","cloudformation:UpdateStack","cloudformation:ValidateTemplate"],"Effect":"Allow","Resource":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":cloudformation:",{"Ref":"AWS::Region"},":",{"Ref":"AWS::AccountId"},":stack/NetworkStackFromPipeline/*"]]}}],"Version":"2012-10-17"},"policyName":"FlaskDockerPipelinee1CreateVPCDeployNetworkStackCodePipelineActionRoleDefaultPolicy9FCB8460","roles":[{"Ref":"FlaskDockerPipelinee1CreateVPCDeployNetworkStackCodePipelineActionRole113390F1"}]}}}}}}},"Role":{"id":"Role","path":"SimplePipelineStack/FlaskDockerPipelinee1/Create_VPC/DeployNetworkStack/Role","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.232.1","metadata":[]},"children":{"ImportRole":{"id":"ImportRole","path":"SimplePipelineStack/FlaskDockerPipelinee1/Create_VPC/DeployNetworkStack/Role/ImportRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.232.1","metadata":[]}},"Resource":{"id":"Resource","path":"SimplePipelineStack/FlaskDockerPipelinee1/Create_VPC/DeployNetworkStack/Role/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.232.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"cloudformation.amazonaws.com"}}],"Version":"2012-10-17"}}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"SimplePipelineStack/FlaskDockerPipelinee1/Create_VPC/DeployNetworkStack/Role/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.232.1","metadata":[]},"children":{"Resource":{"id":"Resource","path":"SimplePipelineStack/FlaskDockerPipelinee1/Create_VPC/DeployNetworkStack/Role/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.232.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["s3:GetObject*","s3:GetBucket*","s3:List*"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["FlaskDockerPipelinee1ArtifactsBucketF2853016","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["FlaskDockerPipelinee1ArtifactsBucketF2853016","Arn"]},"/*"]]}]},{"Action":["kms:Decrypt","kms:DescribeKey"],"Effect":"Allow","Resource":{"Fn::GetAtt":["FlaskDockerPipelinee1ArtifactsBucketEncryptionKey52C10CFF","Arn"]}},{"Action":"*","Effect":"Allow","Resource":"*"}],"Version":"2012-10-17"},"policyName":"FlaskDockerPipelinee1CreateVPCDeployNetworkStackRoleDefaultPolicyF7339B96","roles":[{"Ref":"FlaskDockerPipelinee1CreateVPCDeployNetworkStackRole2EB9FA80"}]}}}}}}}}}}},"BuildAndPushDocker":{"id":"BuildAndPushDocker","path":"SimplePipelineStack/FlaskDockerPipelinee1/BuildAndPushDocker","constructInfo":{"fqn":"constructs.Construct","version":"10.4.3"},"children":{"DockerBuild":{"id":"DockerBuild","path":"SimplePipelineStack/FlaskDockerPipelinee1/BuildAndPushDocker/DockerBuild","constructInfo":{"fqn":"constructs.Construct","version":"10.4.3"},"children":{"CodePipelineActionRole":{"id":"CodePipelineActionRole","path":"SimplePipelineStack/FlaskDockerPipelinee1/BuildAndPushDocker/DockerBuild/CodePipelineActionRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.232.1","metadata":[]},"children":{"ImportCodePipelineActionRole":{"id":"ImportCodePipelineActionRole","path":"SimplePipelineStack/FlaskDockerPipelinee1/BuildAndPushDocker/DockerBuild/CodePipelineActionRole/ImportCodePipelineActionRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.232.1","metadata":[]}},"Resource":{"id":"Resource","path":"SimplePipelineStack/FlaskDockerPipelinee1/BuildAndPushDocker/DockerBuild/CodePipelineActionRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.232.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"AWS":{"Fn::GetAtt":["FlaskDockerPipelinee1Role2C73E70F","Arn"]}}}],"Version":"2012-10-17"}}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"SimplePipelineStack/FlaskDockerPipelinee1/BuildAndPushDocker/DockerBuild/CodePipelineActionRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.232.1","metadata":[]},"children":{"Resource":{"id":"Resource","path":"SimplePipelineStack/FlaskDockerPipelinee1/BuildAndPushDocker/DockerBuild/CodePipelineActionRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.232.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["codebuild:BatchGetBuilds","codebuild:StartBuild","codebuild:StopBuild"],"Effect":"Allow","Resource":{"Fn::GetAtt":["DockerBuildProjectt19827A3BA","Arn"]}}],"Version":"2012-10-17"},"policyName":"FlaskDockerPipelinee1BuildAndPushDockerDockerBuildCodePipelineActionRoleDefaultPolicy024F674C","roles":[{"Ref":"FlaskDockerPipelinee1BuildAndPushDockerDockerBuildCodePipelineActionRole4005A06B"}]}}}}}}}}}}}}},"CDKMetadata":{"id":"CDKMetadata","path":"SimplePipelineStack/CDKMetadata","constructInfo":{"fqn":"constructs.Construct","version":"10.4.3"},"children":{"Default":{"id":"Default","path":"SimplePipelineStack/CDKMetadata/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.232.1"}},"Condition":{"id":"Condition","path":"SimplePipelineStack/CDKMetadata/Condition","constructInfo":{"fqn":"aws-cdk-lib.CfnCondition","version":"2.232.1"}}}},"BootstrapVersion":{"id":"BootstrapVersion","path":"SimplePipelineStack/BootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnParameter","version":"2.232.1"}},"CheckBootstrapVersion":{"id":"CheckBootstrapVersion","path":"SimplePipelineStack/CheckBootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnRule","version":"2.232.1"}}}},"NetworkStack":{"id":"NetworkStack","path":"NetworkStack","constructInfo":{"fqn":"aws-cdk-lib.Stack","version":"2.232.1"},"children":{"MyPipelineVpc2":{"id":"MyPipelineVpc2","path":"NetworkStack/MyPipelineVpc2","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.Vpc","version":"2.232.1","metadata":[]},"children":{"Resource":{"id":"Resource","path":"NetworkStack/MyPipelineVpc2/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnVPC","version":"2.232.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::VPC","aws:cdk:cloudformation:props":{"cidrBlock":"10.0.0.0/16","enableDnsHostnames":true,"enableDnsSupport":true,"instanceTenancy":"default","tags":[{"key":"Name","value":"NetworkStack/MyPipelineVpc2"}]}}},"PublicSubnetSubnet1":{"id":"PublicSubnetSubnet1","path":"NetworkStack/MyPipelineVpc2/PublicSubnetSubnet1","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.PublicSubnet","version":"2.232.1","metadata":[]},"children":{"Subnet":{"id":"Subnet","path":"NetworkStack/MyPipelineVpc2/PublicSubnetSubnet1/Subnet","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSubnet","version":"2.232.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::Subnet","aws:cdk:cloudformation:props":{"availabilityZone":{"Fn::Select":[0,{"Fn::GetAZs":""}]},"cidrBlock":"10.0.0.0/24","mapPublicIpOnLaunch":true,"tags":[{"key":"aws-cdk:subnet-name","value":"PublicSubnet"},{"key":"aws-cdk:subnet-type","value":"Public"},{"key":"Name","value":"NetworkStack/MyPipelineVpc2/PublicSubnetSubnet1"}],"vpcId":{"Ref":"MyPipelineVpc2975551DF"}}}},"Acl":{"id":"Acl","path":"NetworkStack/MyPipelineVpc2/PublicSubnetSubnet1/Acl","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.232.1","metadata":[]}},"RouteTable":{"id":"RouteTable","path":"NetworkStack/MyPipelineVpc2/PublicSubnetSubnet1/RouteTable","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnRouteTable","version":"2.232.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::RouteTable","aws:cdk:cloudformation:props":{"tags":[{"key":"Name","value":"NetworkStack/MyPipelineVpc2/PublicSubnetSubnet1"}],"vpcId":{"Ref":"MyPipelineVpc2975551DF"}}}},"RouteTableAssociation":{"id":"RouteTableAssociation","path":"NetworkStack/MyPipelineVpc2/PublicSubnetSubnet1/RouteTableAssociation","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSubnetRouteTableAssociation","version":"2.232.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SubnetRouteTableAssociation","aws:cdk:cloudformation:props":{"routeTableId":{"Ref":"MyPipelineVpc2PublicSubnetSubnet1RouteTableB36A49A3"},"subnetId":{"Ref":"MyPipelineVpc2PublicSubnetSubnet1SubnetC369078C"}}}},"DefaultRoute":{"id":"DefaultRoute","path":"NetworkStack/MyPipelineVpc2/PublicSubnetSubnet1/DefaultRoute","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnRoute","version":"2.232.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::Route","aws:cdk:cloudformation:props":{"destinationCidrBlock":"0.0.0.0/0","gatewayId":{"Ref":"MyPipelineVpc2IGW38DDEB36"},"routeTableId":{"Ref":"MyPipelineVpc2PublicSubnetSubnet1RouteTableB36A49A3"}}}}}},"IGW":{"id":"IGW","path":"NetworkStack/MyPipelineVpc2/IGW","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnInternetGateway","version":"2.232.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::InternetGateway","aws:cdk:cloudformation:props":{"tags":[{"key":"Name","value":"NetworkStack/MyPipelineVpc2"}]}}},"VPCGW":{"id":"VPCGW","path":"NetworkStack/MyPipelineVpc2/VPCGW","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnVPCGatewayAttachment","version":"2.232.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::VPCGatewayAttachment","aws:cdk:cloudformation:props":{"internetGatewayId":{"Ref":"MyPipelineVpc2IGW38DDEB36"},"vpcId":{"Ref":"MyPipelineVpc2975551DF"}}}}}},"CDKMetadata":{"id":"CDKMetadata","path":"NetworkStack/CDKMetadata","constructInfo":{"fqn":"constructs.Construct","version":"10.4.3"},"children":{"Default":{"id":"Default","path":"NetworkStack/CDKMetadata/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.232.1"}},"Condition":{"id":"Condition","path":"NetworkStack/CDKMetadata/Condition","constructInfo":{"fqn":"aws-cdk-lib.CfnCondition","version":"2.232.1"}}}},"BootstrapVersion":{"id":"BootstrapVersion","path":"NetworkStack/BootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnParameter","version":"2.232.1"}},"CheckBootstrapVersion":{"id":"CheckBootstrapVersion","path":"NetworkStack/CheckBootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnRule","version":"2.232.1"}}}},"Tree":{"id":"Tree","path":"Tree","constructInfo":{"fqn":"constructs.Construct","version":"10.4.3"}}}}}